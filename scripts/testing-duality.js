function Point(n,t){this.x=n,this.y=t}function Line(n,t,i){0==n?this.m=1/0:this.m=t/n,this.c=i.y-this.m*i.x,this.originPoint=i}function mapCoordinate(n,t){return new Point((n-WIDTH/2)/SCALING,(HEIGHT/2-t)/SCALING)}Point.prototype.duality=function(){var n=new Line(1,this.x,new Point(0,-this.y));return n},Point.prototype.distanceFromPoint=function(n){var t=this.x-n.x,i=this.y-n.y;return Math.sqrt(Math.pow(t,2)+Math.pow(i,2))},Point.prototype.distanceFromOrigin=function(){return this.distanceFromPoint(new Point(0,0))},Point.prototype.inBoundary=function(n,t,i,o){return this.x>=n&&this.x<=i&&this.y>=t&&this.y<=o?!0:!1},Line.prototype.findPointOnLine=function(n){var t=new Point(n,void 0);return t.y=this.m*t.x+this.c,t},Line.prototype.isPointOnLine=function(n){return this.m==1/0?n.x==this.originPoint.x:this.findPointOnLine(n.x).y==n.y},Line.prototype.isPointAbove=function(n){return this.m==1/0?n.x<=this.originPoint.x:n.y>=this.findPointOnLine(n.x).y},Line.prototype.intersectWithLine=function(n){if(this.m==n.m)return null;var t;t=this.m==1/0||n.m==1/0?this.m==1/0?this.originPoint.x:n.originPoint.x:(this.c-n.c)/(n.m-this.m);var i=this.m*t+this.c;return new Point(t,i)},console.log("xxx");for(var RADIUS=5,STOKE_WITDH=5,SCALING=30,normalPane=Snap("#normal-pane"),dualPane=Snap("#dual-pane"),HEIGHT=normalPane.node.offsetHeight,WIDTH=normalPane.node.offsetWidth,SCALED_HEIGHT=HEIGHT/SCALING,SCALED_WIDTH=WIDTH/SCALING,papers=[normalPane,dualPane],i=0;i<papers.length;i++){var paper=papers[i],l=paper.line(0,HEIGHT/2,WIDTH,HEIGHT/2);l.attr({stroke:"#000"});var l2=paper.line(WIDTH/2,0,WIDTH/2,HEIGHT);l2.attr({stroke:"#000"})}var COLOR_PROFILE={0:"#FF0000",1:"#0000FF"},boundaries=[new Line(1,0,new Point(0,SCALED_HEIGHT/2)),new Line(1,0,new Point(0,-SCALED_HEIGHT/2)),new Line(0,1,new Point(SCALED_WIDTH/2,0)),new Line(0,1,new Point(-SCALED_WIDTH/2,0))],color=0;normalPane.click(function(n){var t=normalPane.circle(n.x,n.y,RADIUS),i=mapCoordinate(n.x,n.y),o=COLOR_PROFILE[color];t.attr({fill:o});var e=i.duality(),r=[];console.log(i),console.log(e);for(var a=0;a<boundaries.length;a++){var s=boundaries[a],h=e.intersectWithLine(s);h.inBoundary(-SCALED_WIDTH/2,-SCALED_HEIGHT/2,SCALED_WIDTH/2,SCALED_HEIGHT/2)&&r.push(h)}console.log(r);for(var l=0;2>l;l++)r[l].x=SCALING*(r[l].x+SCALED_WIDTH/2),r[l].y=SCALING*(SCALED_HEIGHT/2-r[l].y);s=dualPane.line(r[0].x,r[0].y,r[1].x,r[1].y),s.attr({stroke:o}),t.hover(function(){s.attr({strokeWidth:3})},function(){s.attr({strokeWidth:1})}),color=(color+1)%2});